# README.md

## 东东播放器 (mddplayer)

一款基于 Rust 开发的轻量级终端音频播放器，支持 MP3、FLAC、WAV 等主流格式，提供灵活的播放模式和便捷的终端控制。

## 功能特性

* **多格式支持**：兼容 MP3、FLAC、WAV 音频文件。

* **灵活输入源**：支持单个文件、音乐目录、TXT 格式播放列表（一行一个路径）。

* **三种播放模式**：顺序播放、倒序播放、随机播放，且支持循环播放。

* **终端便捷控制**：支持暂停 / 恢复、切歌、音量调节等操作，实时显示播放进度。

* **自适应显示**：自动适配终端宽度，安全截断长文本，避免显示错乱。

* **元数据读取**：读取音频文件的 ID3 标签，显示歌曲名和艺术家信息。

## 快速开始

### 前提条件

* 已安装 Rust 环境（推荐 1.60+），可通过 [rustup](https://www.rust-lang.org/tools/install) 安装。

* 支持的操作系统：Linux、macOS、Windows（终端需支持 ANSI 转义序列）。

### 安装与运行

**克隆仓库**

```
git clone https://github.com/xa1st/mddplayer.git

cd mddplayer
```

**编译项目**

```
cargo build --release
```

 **运行播放器**

* 播放单个文件

```
./target/release/mddplayer -f /path/to/your/audio.mp3
```
* 播放目录下所有支持的音频文件

```
./target/release/mddplayer -f /path/to/your/music/dir
```

* 播放 TXT 播放列表

```
./target/release/mddplayer --list /path/to/your/playlist.txt
```

## 命令行参数说明

| 参数                     | 简写   | 说明                                      |
| ---------------------- | ---- | --------------------------------------- |
| `--file-or-dir <PATH>` | `-f` | 必选（与 `--list` 二选一），指定单个音频文件或包含音频文件的目录路径 |
| `--list <PATH>`        | -    | 必选（与 `-f` 二选一），指定 TXT 格式的播放列表文件路径       |
| `--clean`              | `-c` | 可选，启用纯净模式，不显示程序说明和控制指南                  |
| `--mode <N>`           | `-m` | 可选，指定播放模式（1 = 顺序，2 = 倒序，3 = 随机），默认值为 1  |
| `--loop`               | -    | 可选，启用循环播放，播放列表结束后重新开始                   |
| `--help`               | `-h` | 可选，显示帮助信息                               |
| `--version`            | `-V` | 可选，显示程序版本                               |

## 终端控制指南

播放过程中，通过以下按键控制播放器：

| 按键    | 功能           |
| ----- | ------------ |
| `P` 键 | 暂停播放         |
| 空格键   | 恢复播放         |
| `←` 键 | 切换到上一首       |
| `→` 键 | 切换到下一首       |
| `↑` 键 | 增加音量（每次 +5%） |
| `↓` 键 | 减少音量（每次 -5%） |
| `Q` 键 | 退出播放器        |

## 技术栈

* **核心音频处理**：`rodio`（音频播放）、`symphonia`（音频时长计算）

* **终端交互**：`crossterm`（终端控制、按键监听）

* **命令行解析**：`clap`（参数解析）

* **元数据读取**：`id3`（读取音频 ID3 标签）

* **随机功能**：`rand`（随机播放模式的列表洗牌）

## 许可证

本项目基于 **Apache License 2.0** 开源，详见 [LICENSE](LICENSE) 文件。